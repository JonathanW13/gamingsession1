<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <title>Leere Seite</title>
    <script>


        document.addEventListener("DOMContentLoaded", function () {
            console.log("Die Seite ist geladen!");
            const canvas = document.getElementById("game");
            const ctx = canvas.getContext("2d");

            // Sprite-Sheet laden
            const sprite = new Image();
            sprite.src = "contra clone character sprite sheet.png";  // 6 Frames nebeneinander

            // Sprite-Einstellungen
            const FRAME_WIDTH = 1800;   // Breite eines Frames
            const FRAME_HEIGHT = 1200;  // Höhe eines Frames
            const FRAME_COUNT = 6;     // Anzahl der Frames

            let frame = 0;             // Welches Frame gerade?
            let x = 10;                // Startposition
            let speed = 3;             // Laufgeschwindigkeit
            let frameTimer = 0;        // Zeitmessung für Framewechsel

            // function loop1() {
            //     ctx.clearRect(0, 0, canvas.width, canvas.height);

            //     // Animation verlangsamen
            //     frameTimer++;
            //     if (frameTimer % 6 === 0) {
            //         frame = (frame + 1) % FRAME_COUNT;  // nächstes Frame
            //     }

            //     // Position aktualisieren
            //     x += speed;
            //     if (x > canvas.width) x = -FRAME_WIDTH;

            //     // Frame zeichnen
            //     ctx.drawImage(
            //         sprite,
            //         frame * FRAME_WIDTH, 0,         // Frame im Sprite-Sheet
            //         FRAME_WIDTH, FRAME_HEIGHT,      // Ausschneidebereich
            //         x, 40,                          // Position auf Canvas
            //         200, 200                        // Größe auf Canvas
            //     );

            //     requestAnimationFrame(loop1);
            // }

            // loop1();

            // const canvas = document.getElementById("game");
            // const ctx = canvas.getContext("2d");

            // Sprite-Sheet laden
            const spriteRun = new Image();
            spriteRun.src = "contra clone character sprite sheet.png"; // Laufanimation

            const spriteIdle = new Image();
            spriteIdle.src = "Crate sprite sheet.png"; // Standbild (1 Frame)

            // const FRAME_WIDTH = 256;
            // const FRAME_HEIGHT = 256;
            // const FRAME_COUNT = 6;

            x = 10;
            let y = 10;
            // let speed = 4;

            // let frame = 0;
            // let frameTimer = 0;

            let movingLeft = false;
            let movingRight = false;

            function update() {
                // Bewegung
                if (movingRight) x += speed;
                if (movingLeft) x -= speed;

                // Framewechsel nur während Bewegung
                if (movingLeft || movingRight) {
                    frameTimer++;
                    if (frameTimer % 5 === 0) {
                        frame = (frame + 1) % FRAME_COUNT;
                    }
                } else {
                    frame = 0; // Standbild
                }
            }

            function draw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                if (movingLeft || movingRight) {
                    // Laufanimation
                    ctx.drawImage(
                        spriteRun,
                        frame * FRAME_WIDTH, 0,
                        FRAME_WIDTH, FRAME_HEIGHT,
                        x, y,
                        50, 50
                    );
                } else {
                    // Idle
                    // ctx.drawImage(spriteIdle, x, y, 180, 180);
                    ctx.drawImage(spriteRun, x, y, 50, 50);
                }
            }

            function loop() {
                update();
                draw();
                requestAnimationFrame(loop);
            }

            loop();

            // Tastatur-Events
            document.addEventListener("keydown", (e) => {
                if (e.key === "ArrowRight") movingRight = true;
                if (e.key === "ArrowLeft") movingLeft = true;
            });

            document.addEventListener("keyup", (e) => {
                if (e.key === "ArrowRight") movingRight = false;
                if (e.key === "ArrowLeft") movingLeft = false;
            });
        });  
    </script>
    <style>
        #game {
            background: lightblue; /* Farbe */
            width: 1600px;
            height: 1000px;
        }
    </style>
</head>


<body>
    <canvas id="game"></canvas>
</body>

</html>