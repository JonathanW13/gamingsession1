<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <title>Leere Seite</title>
    <script>


        document.addEventListener("DOMContentLoaded", function () {
            console.log("Die Seite ist geladen!");
            const canvas = document.getElementById("game");
            const ctx = canvas.getContext("2d");

            // Sprite-Sheet laden
            const sprite = new Image();
            sprite.src = "contra clone character sprite sheet.png";  // 6 Frames nebeneinander

            // Sprite-Einstellungen
            const FRAME_WIDTH = 600;   // Breite eines Frames
            const FRAME_HEIGHT = 300;  // Höhe eines Frames
            const FRAME_COUNT = 6;     // Anzahl der Frames

            let frame = 0;             // Welches Frame gerade?
            let x = 10;                // Startposition
            let y = 10;
            let speed = 3;             // Laufgeschwindigkeit
            let frameTimer = 0;        // Zeitmessung für Framewechsel

            // Sprite-Sheet laden
            const spriteRun = new Image();
            spriteRun.src = "contra clone character sprite sheet.png"; // Laufanimation

            let lastUpdate = 0;
            const FRAME_DURATION = 150; // ms pro Frame

            let movingLeft = false;
            let movingRight = false;

            function update(timestamp) {
                if (!lastUpdate) lastUpdate = timestamp;

                const elapsed = timestamp - lastUpdate;
                if (elapsed > FRAME_DURATION) {
                    frame = (frame + 1) % FRAME_COUNT;
                    lastUpdate = timestamp;
                }

                // Bewegung
                if (movingRight) x += speed;
                if (movingLeft) x -= speed;
            }

            function draw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                if (movingLeft || movingRight) {
                    // Laufanimation
                    ctx.drawImage(
                        spriteRun,
                        frame * FRAME_WIDTH, 0,
                        FRAME_WIDTH, FRAME_HEIGHT,
                        x, y,
                        FRAME_WIDTH / 2, FRAME_HEIGHT / 2
                    );
                } else {
                    // Idle
                    ctx.drawImage(
                        spriteRun,
                        0, 0,                      // erstes Frame im Sprite-Sheet
                        FRAME_WIDTH, FRAME_HEIGHT,  // Ausschnittgröße
                        x, y,
                        FRAME_WIDTH / 2, FRAME_HEIGHT / 2 // gezeichnete Größe
                    );
                }
            }

            function loop(timestamp) {
                update(timestamp);
                draw();
                requestAnimationFrame(loop);
            }


            loop();

            // Tastatur-Events
            document.addEventListener("keydown", (e) => {
                if (e.key === "ArrowRight") movingRight = true;
                if (e.key === "ArrowLeft") movingLeft = true;
            });

            document.addEventListener("keyup", (e) => {
                if (e.key === "ArrowRight") movingRight = false;
                if (e.key === "ArrowLeft") movingLeft = false;
            });
        });  
    </script>
    <style>
        #game {
            background: lightblue; /* Farbe */
        }
    </style>
</head>


<body>
    <canvas id="game" width="1600" height="1000"></canvas>
</body>

</html>     